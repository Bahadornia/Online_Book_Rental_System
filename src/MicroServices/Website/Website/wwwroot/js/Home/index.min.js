function operationComponent(n){let t="";t=isAdmin=="true"||!0?`
       <button class="btn btn-sm" data-bs-toggle="tooltip" data-bs-placement="top" data-bs-title="ویرایش"><i class="fa fa-pencil" aria-hidden="true"></i>
</button>
<button class="btn btn-sm" data-bs-toggle="tooltip" data-bs-placement="top" data-bs-title="رزرو" onclick="reserveBook('${n}')"><i class="fa fa-bookmark" aria-hidden="true"></i>
</button>
<button class="btn btn-sm" data-bs-toggle="tooltip" data-bs-placement="top" data-bs-title="حذف" onclick = "deleteBook('${n}')"><i class="fa fa-trash" aria-hidden="true"></i></i>
</button>
`:`

<button class="btn btn-sm" onclick="reserveBook('${n}')"><i class="fa fa-bookmark" aria-hidden="true"></i>
</button>

`;const i=document.querySelectorAll('[data-bs-toggle="tooltip"]'),r=[...i].map(n=>new bootstrap.Tooltip(n));return t}class ButtonRenderer{init(){this.eGui=document.createElement("button");this.eGui.className="btn btn-sm btn-primary";this.eGui.innerText="Click me";this.eGui.setAttribute("title","Click to perform action");this.eGui.setAttribute("data-bs-toggle","tooltip");this.eGui.addEventListener("click",()=>{alert("Button clicked!")});setTimeout(()=>{new bootstrap.Tooltip(this.eGui)},0)}getGui(){return this.eGui}destroy(){bootstrap.Tooltip.getInstance(this.eGui)?.dispose()}}let gridApi;var isAdmin=$("#isAdmin").val();const datasource={getRows(n){n.request;$.ajax({url:"/Home/GetAll",type:"Get",success:function(t){n.success({rowData:t.rows,rowCount:t.total})},error:function(t){console.error(t);n.fail()}})}},gridOptions={columnDefs:[{headerName:"تصویر",field:"imageUrl",sortable:!0,filter:!0,cellClass:"logo",cellRenderer:n=>`<img src="${n.value}">`,maxWidth:100},{headerName:"نام کتاب",field:"title",sortable:!0,filter:!0},{headerName:"شناسه",field:"id",sortable:!0,filter:!0},{headerName:"شابک",field:"isbn",sortable:!0,filter:!0},{headerName:"دسته",field:"category",sortable:!0,filter:!0},{headerName:"نویسنده",field:"author",sortable:!0,filter:!0},{headerName:"ناشر",field:"publisher",sortable:!0,filter:!0},{headerName:"توضیحات",field:"description",sortable:!0,filter:!0},{headerName:"عملیات",sortable:!1,filter:!1,cellClass:"operation",cellRenderer:n=>operationComponent(n.data.id)}],defaultColDef:{flex:1,minWidth:60,resizable:!0},rowStyle:{display:"flex",alignItems:"center",justifyContent:"center",backGroundColor:"reds"},rowHeight:60,enableRtl:!0,animateRows:!0,cellStyle:{display:"flex",justifyContent:"center",alignItems:"center"},headerStyle:{justifyContent:"center",display:"flex"},rowModelType:"serverSide",serverSideDatasource:datasource,pagination:!0,paginationPageSize:10,getRowId:n=>n.data.id};reserveBook=n=>{$.ajax({url:`/Home/RentBook`,type:"Post",data:{BookId:n,UserId:0},success:function(){},error:function(n){console.error(n)}})};deleteBook=n=>{Swal.fire({html:"آیا از حذف کتاب با شناسه"+` <b>${n}</b> `+"مطمئن هستید.",icon:"warning",allowOutsideClick:!1,allowEscapeKey:!1,showCloseButton:!0,showCancelButton:!0,confirmButtonText:"بله",cancelButtonText:"لغو"}).then(t=>{t.isConfirmed&&($("#deleteBook input[name='bookId']").val(n),$("#deleteBook").submit())})};const gridDiv=document.querySelector("#agGrid");document.addEventListener("DOMContentLoaded",()=>{gridApi=agGrid.createGrid(gridDiv,gridOptions)});onSuccessDeleteBook=n=>{gridApi.refreshServerSide(),Swal.fire({html:"کتاب با شناسه"+` <b>${n}</b> `+"حذف شد.",icon:"success",allowOutsideClick:!1,allowEscapeKey:!1,showCloseButton:!0,showCancelButton:!1,confirmButtonText:"باشه"})};onSuccessFilterBook=n=>{gridApi.setGridOption("rowData",[]),gridApi.setGridOption("rowData",n)};document.getElementById("searchButton").addEventListener("click",()=>{let n=$("#searchForm").serializeArray(),t=n.reduce((n,t)=>(n[t.name]=t.value??"",n),{});gridApi.setServerSideDatasource({getRows(n){n.request;$.ajax({url:"/Home/Search",type:"Post",data:{...t},headers:{RequestVerificationToken:$('#searchForm input[name="__RequestVerificationToken"]').val()},success:function(t){n.success({rowData:t.rows,rowCount:t.total})},error:function(t){console.error(t);n.fail()}})}})});