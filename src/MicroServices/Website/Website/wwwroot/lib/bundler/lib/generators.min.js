/**
 * Minified by jsDelivr using Terser v5.39.0.
 * Original file: /npm/bundler@0.8.0/lib/generators.js
 *
 * Do NOT use SRI with dynamically generated files! More information: https://www.jsdelivr.com/using-sri-with-dynamic-files
 */
function Bundler(n){var r,o,t,e,i,a,s={bundles_cost:{},bundles_size:{}},f={},u={},c=0,h=n.cost_data,v=n.deps,l={file_size:{},pages:{},sessions:[]};function g(n){var t=function(n){return n.sort().join()}(n);if(!f.hasOwnProperty(t)){var e=f[t]=u[c]={file_group:{},size:!1,plus_neighbors:{},minus_neighbors:{},hash:t,size:0,pages_intersect:{},id:c++,file_count:n.length,intersects:{},diffs:{},unions:{}};for(var i in n.forEach((function(n){e.file_group[n]=!0,e.size+=o[n]})),r)for(var a in r[i])if(e.file_group.hasOwnProperty(r[i][a])){e.pages_intersect[i]=!0;break}}return f[t]}function p(n){var r="";for(var o in n)r+=o+":",r+=n[o].map((function(n){return n.id})).join(),r+=";";return r}function d(n,r){if(!n.intersects.hasOwnProperty(r.id)){var o={};if(n.file_count>r.file_count){var t=n;n=r,r=t}for(var e in n.file_group)r.file_group.hasOwnProperty(e)&&(o[e]=!0);n.intersects[r.id]=r.intersects[n.id]=g(Object.keys(o))}return n.intersects[r.id]}function _(n,r){if(!n.diffs.hasOwnProperty(r.id)){var o={};for(var t in n.file_group)r.file_group.hasOwnProperty(t)||(o[t]=!0);n.diffs[r.id]=g(Object.keys(o))}return n.diffs[r.id]}function w(n,r){return n-r}function y(n,r){var o,t=[];for(var e in n)t.length&&!r(t[t.length-1],n[e])||null==(o=n[e])||o instanceof Array&&0==o.length||t.push(n[e]);return t}function O(n,r,o,t){var e=[];e.length=r.pages.length;for(var i={},a=r.pages.length,s=0;s<a;++s){var f={};n[r.pages[s]].forEach((function(n){var r=n.id;i.hasOwnProperty(r)||(i[r]=!0,f.hasOwnProperty(n.size)?++f[n.size]:f[n.size]=1)})),e[s]=f}return function(n,r){var o=0;return n.forEach((function(n){var t=0;for(var e in n)t+=(r.file_cost+e*r.kb_cost)*n[e];o+=t})),o}(e,t)*r.weight}function m(n,r){var o=0;if(void 0===r&&(r=p(n)),!s.bundles_cost.hasOwnProperty(r)){for(var e in t)o+=O(n,t[e],0,h);return s.bundles_cost[r]=o/t.length}return s.bundles_cost[r]}function b(n,r){for(var o=[],t=r.length,e=function(n,r){var o={};return r.forEach((function(t,e){var i=[];r.forEach((function(r,o){t!=r&&function(n,r,o){for(var t in r)for(var e in o)if(n.hasOwnProperty(r[t])&&-1!=n[r[t]].indexOf(o[e]))return!0;return!1}(n,t,r)&&i.push(o)})),o[e]=i})),o}(n,r);o.length!=t;){var i=!1;for(var a in r){var s=a-0;if(-1==o.indexOf(s)&&!e[s].length){for(var f in i=!0,o.push(s),e){var u=e[f].indexOf(s);-1!=u&&e[f].splice(u,1)}break}}if(!i)throw"Bundles are not consistent"}return o}function E(n,r){return Math.floor((n-r)*Math.random())+r}function P(n){var r={};for(var o in n){var t=i[o];r[t]=[],n[o].forEach((function(n){var o=[];for(var e in n.file_group)a[e].forEach((function(n){o.push(n)}));o.sort(),r[t].push(o)}))}return r}for(var z in v){var M=v[z];for(var k in l.pages[z]=[],M)M[k].size&&(l.file_size[k]=(M[k].size||0)/1e3,l.pages[z].push(k))}for(var z in e={},v)for(var k in e[z]={},v[z])if(l.file_size.hasOwnProperty(k)){e[z][k]=[];var j={},x=v[z][k].deps.length;v[z][k].deps.forEach((function(n){j[n]=!0}));for(var S={};x;)for(var B in j)S.hasOwnProperty(B)||(v[z][B].size&&e[z][k].push(B),v[z][B].deps.forEach((function(n){S.hasOwnProperty(n)||(j[n]=!0,++x)}))),S[B]=!0,delete j[B],--x}l.sessions=function(n,r){var o={};function t(r){var o=function(n){return n.join()}(r);n.hasOwnProperty(o)?n[o].weight+=1:n[o]={pages:r,weight:1}}for(var e in n.forEach((function(n){o.hasOwnProperty(n[0])||(o[n[0]]=[]),o[n[0]].push(n)})),n={},o){o[e].sort((function(n,r){return n[2]-r[2]}));var i=-1/0,a=[];o[e].forEach((function(n){n[2]-i>r&&a.length&&(t(a),a=[]),a.push(n[1]),i=n[2]})),a.length&&t(a)}var s=[];for(var f in n)s.push(n[f]);return s}(n.sessions,n.max_pause),l=function(n){var r={file_size:[],pages:[],sessions:[]},o=0,t={},e=[];for(var i in n.pages)t[i]=o++,e.push(i);var a={};for(var s in n.file_size)for(var i in a[s]=[],n.pages)a[s][t[i]]=0;for(var i in n.pages)n.pages[i].forEach((function(n){a[n][t[i]]=1}));var f={},u=0,c={},h=[],v={};for(var s in a){var l=a[s].join("");f.hasOwnProperty(l)||(f[l]=0,c[l]=u++,v[l]=0),++v[l],f[l]+=n.file_size[s],h.hasOwnProperty(c[l])||(h[c[l]]=[]),h[c[l]].push(s)}for(var s in f)r.file_size[c[s]]=f[s];for(i=0;i<o;++i)for(var s in r.pages[i]=[],f)"1"==s[i]&&r.pages[i].push(c[s]);return n.sessions.forEach((function(n){var o={pages:[],weight:n.weight};n.pages.forEach((function(n){o.pages.push(t[n])})),r.sessions.push(o)})),{log:r,page_names:e,file_names:h}}(l),r=l.log.pages,o=l.log.file_size,t=l.log.sessions,i=l.page_names,a=l.file_names,this.generators={all:function(){var n={};for(var o in r)r[o].forEach((function(r){n[r]=!0}));var t=g(Object.keys(n)),e={};for(var o in r)e[o]=[t];return{bundling:P(e),cost:m(e)}},none:function(){var n={};for(var o in r)n[o]=[],r[o].forEach((function(r){n[o].push(g([r]))}));return{bundling:P(n),cost:m(n)}},every:function(){var n={};for(var o in r)n[o]=[g(r[o])];return{bundling:P(n),cost:m(n)}},mega:function(n){var o=[],t=0,i={},a={};for(var s in r)t+=r[s].length,r[s].forEach((function(n){a.hasOwnProperty[n]||(a[n]=g([n]))})),i[s]=g(r[s]);function f(n){return(n=n.filter((function(n){return n[0].size}))).sort((function(n,r){return w(n[0].id,r[0].id)||w(n[1],r[1])})),(n=y(n,(function(n,r){return w(n[0].id,r[0].id)}))).sort((function(n,r){return w(r[1],n[1])})),n}function u(n,r){var o=1/0,t=-1;for(var e in n){var i=d(r,n[e][0]);if(i.file_count){var a=n[e][1]/i.file_count;a<o&&(o=a,t=e)}else delete n[e]}return t}function c(n){n=f(n);var o={};for(var t in r)o[t]={};var e=0;for(var t in n.forEach((function(n){for(var r in e+=n[1],n[0].pages_intersect)o[r][n[0].id]=n})),r)r[t].forEach((function(n){var r=a[n];o[t][r.id]=[r,e+1]}));var s={};for(var t in r){for(var c=[],h=i[t],v=o[t];h.file_count;){var l=u(v,h);c.push(v[l][0]),h=_(h,v[l][0]),delete v[l]}s[t]=c}return s}function h(n,r){if(n.length>1){var o=n.length,t=E(0,o),e=E(0,o-1);switch(e>=t&&++e,r){case"union":var i=function(n,r){if(!n.unions.hasOwnProperty(r.id)){var o=[];for(var t in n.file_group)o[t]=!0;for(var t in r.file_group)o[t]=!0;n.unions[r.id]=r.unions[n.id]=g(Object.keys(o))}return n.unions[r.id]}(n[t][0],n[e][0]),a=Math.max(n[t][1],n[e][1]);n[t]=[i,a],n.splice(e,1);break;case"diff":i=_(n[t][0],n[e][0]);n[t][0]=i;break;case"intersect":i=d(n[t][0],n[e][0]);n[t][0]=i}}return n}Object.keys(a);var v=[[function(n){return h(n,"union")},.2],[function(n){return h(n,"diff")},.2],[function(n){return h(n,"intersect")},.2],[function(n){if(n.length>0){var r=n[E(0,n.length)];r[1]*=.5+1.5*Math.random(),r[1]=Math.min(Math.round(r[1]),100)}return n},.2],[function(n){return n[E(0,n.length)]=n[n.length-1],--n.length,n},.2]];function l(n){var r=[];r.length=n.length;for(var o=n.length;--o>=0;)r[o]=[n[o][0],n[o][1]];var t=Math.random();for(var o in v)if((t-=v[o][1])<0)return[v[o][0](r),o];return[r,v.length]}function O(n,r,o){return!1!==r&&k.length>t&&(len_cost=k.length/t),1*m(n,o)}function z(n,r){var o=[];return n.forEach((function(n){Math.random()<.5&&o.push([n[0],n[1]])})),r.forEach((function(n){Math.random()<.5&&o.push([n[0],n[1]])})),f(o)}for(var M=0;M<30;++M){var k=[];for(var s in r)k.push([g(r[s]),50]);o.push(k)}o.sort((function(n,r){return O(c(n),!0)-O(c(r),!0)}));var j=O(c(o[0]),!0),x=0;for(var M in good_mutations=[],diff_mutations=[],v)good_mutations[M]=0,diff_mutations[M]=0;function S(n){var r="";return n.forEach((function(n){r+=String(n[0].id)+":"+String(n[1])+"|"})),r}if(childs_better_two=0,childs_better_one=0,n){var B={};o.forEach((function(n){B[S(n)]={gen:n,ways:[{way:"initial"}]}}))}if(n)var G=0,A=0,J=[];for(var N=0;N<1e3&&x<5;++N){var T=o.length;for(M=0;M<T;++M)for(var q=M+1;q<T;++q){var C=z(o[M],o[q]);if(C.length&&(o.push(C),n)){var D=S(C);B.hasOwnProperty(D)||(B[D]={gen:C,ways:[]},B[D].ways.push({way:"pair",parents:[S(o[M]),S(o[q])]}))}}for(M=Math.min(30,o.length);--M>=0;){var F=O(c(o[M]),!0);for(q=5;--q>=0;){var H=l(o[M]);if(n&&(O(c(H[0]))<F&&++good_mutations[H[1]],H[1]<v.length&&++diff_mutations[H[1]]),o.push(H[0]),n){D=S(H[0]);B.hasOwnProperty(D)||(B[D]={gen:H[0],ways:[]}),B[D].ways.push({way:"mutation",type:String(H[1]),old:S(o[M])})}}}var I=[];o.forEach((function(n){var r=c(n),o=p(r);I.push({hash:o,bundling:r})}));var K=[];K.length=o.length;for(M=o.length;--M>=0;)K[M]=M;function L(n,r){return o=I[n].hash,t=I[r].hash,o>t?1:o==t?0:-1;var o,t}K.sort(L),K=y(K,L);var Q=[];K.forEach((function(n){I[n].cost=O(I[n].bundling,I[n].hash),Q.push(Math.round(100*I[n].cost)/100)})),Q.sort(w),K.sort((function(n,r){return I[n].cost-I[r].cost}));var R=[];R.length=Math.min(30,K.length);for(M=R.length;--M>=0;)R[M]=o[K[M]];o=R,delete R;var U=I[K[0]].cost;U==j?++x:(x=0,j=U),n&&console.log("Generation: ",N,U,I[K[5]].cost,I[K[15]].cost)}n&&console.log("Generations: ",N);var V=c(o[0]);if(n)D=S(o[0]);if(n&&(console.log("Total bundles: ",G,", bad bundles: ",A),console.log(JSON.stringify(J))),n){var W=0,X=0;for(var M in console.log(),good_mutations.forEach((function(n){W+=n})),diff_mutations.forEach((function(n){X+=n})),good_mutations)console.log(M,good_mutations[M]/W);console.log(W/X)}var Y=P(V);for(var s in Y)Y[s]=b(e[s],Y[s]).map((function(n){return Y[s][n]}));return{bundling:Y,cost:O(V,!1)}}}}exports.get_generators=function(n){return new Bundler(n).generators};
//# sourceMappingURL=/sm/1ad8f7b2d002acb91772eb6a2e04a04b8d999261ba870fc14dc5fcf7a289280c.map